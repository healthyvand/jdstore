<div class="row">
  <div class="col-md-12">

    <h2> Historical orders </h2>

    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Order Number</th>
          <th>Total Price</th>
          <th>Buyer</th>
          <th>Receiver</th>
          <th>Shipping Address</th>
          <th>Order Status</th>
          <th>Operation</th>
        </tr>
      </thead>
      <tbody>

        <% @orders.each do |order| %>
        <tr>
          <td>
            <%= link_to(order.id,order_path(order.token)) %> 
          </td>
          <td><%= order.total %></td>
          <td><%= order.billing_name %></td>
          <td><%= order.shipping_name %></td>
          <td><%= order.shipping_address %></td>

          <td>
            <% case order.aasm_state %>
              <% when 'order_placed' %>
                <i class="fa fa-gavel" aria-hidden="true"> Ordered </i>
              <% when 'paid' %>
                <i class="fa fa-money" aria-hidden="true"> Paid </i>
              <% when 'shipping' %>
                <i class="fa fa-trunk" aria-hidden="true"> Delivering </i>
              <% when 'shipped' %>
                <i class="fa fa-square" aria-hidden="true"> Shipped </i>
              <% when 'order_cancelled' %>
                <i class="fa fa-close" aria-hidden="true"> Canceled </i>
              <% when 'good_returned' %>
                <i class="fa fa-reply" aria-hidden="true"> Returned </i>
              <% else %>
                <i class="fa fa-question" aria-hidden="true"> Invalid </i>
            <% end %>
          </td>
          <td>
          <% if order.aasm_state == 'order_placed' || order.aasm_state == 'paid'%>
            <%= link_to('Cancel',account_order_apply_cancell_order_path(order.token),:method => :post,class: "btn btn-sm btn-default") %>
            <% end %>
          </td>


        </tr>
        <% end %>

      </tbody>
    </table>


  </div>
</div>